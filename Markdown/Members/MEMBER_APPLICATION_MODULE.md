# üìã Member Application Module

## ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° (Overview)

**Member Application Module** ‡∏Ñ‡∏∑‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏ö‡∏ö Dynamic ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡∏∂‡πâ‡∏ô‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö (‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏´‡∏°‡∏≤) ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö:

‚úÖ **‡∏´‡∏•‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°**: Member Application, PTW, Toolbox Talk, ‡πÅ‡∏•‡∏∞‡∏≠‡∏∑‡πà‡∏ô‡πÜ  
‚úÖ **Config ‡πÅ‡∏ö‡∏ö Per-Project**: ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ß‡πà‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞ field ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á/required ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£  
‚úÖ **‡∏´‡∏•‡∏≤‡∏¢ Report Template**: ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ template ‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ  
‚úÖ **Public Form Access**: ‡πÉ‡∏ä‡πâ token-based link ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á login  
‚úÖ **‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£**: ‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô, ‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÅ‡∏û‡∏ó‡∏¢‡πå (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö jpg/png/pdf)

---

## üèóÔ∏è ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ form_templates   ‚îÇ ‚Üê Master Form Types (Member App, PTW, etc.)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ form_fields      ‚îÇ ‚Üê Field Definitions (26 fields)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ project_form_configs    ‚îÇ ‚Üê Which forms enabled per project
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ project_field_configs   ‚îÇ ‚Üê Per-project field customization
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   (visible, required, labels)
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ report_templates ‚îÇ ‚Üê HTML/CSS for PDF generation
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ member_applications      ‚îÇ ‚Üê Actual Submissions (JSONB)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ‚ñ∫ member_application_documents (Files)
         ‚îî‚îÄ‚ñ∫ member_application_tokens (Public Access)
```

---

## üìä ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Database Tables)

| # | ‡∏ï‡∏≤‡∏£‡∏≤‡∏á | ‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå |
|---|-------|-----------|
| 1 | `form_templates` | Master list ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î |
| 2 | `form_fields` | ‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ü‡∏≠‡∏£‡πå‡∏° (26 fields ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Member App) |
| 3 | `project_form_configs` | ‡∏ú‡∏π‡∏Å‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏±‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ |
| 4 | `project_field_configs` | ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ß‡πà‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á/required ‡πÉ‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡πâ‡∏ô‡πÜ ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà |
| 5 | `report_templates` | HTML/CSS template ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏¥‡∏°‡∏û‡πå PDF |
| 6 | `member_applications` | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏≠‡∏Å (‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏ö‡∏ö JSONB) |
| 7 | `member_application_documents` | ‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î (‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô, ‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÅ‡∏û‡∏ó‡∏¢‡πå) |
| 8 | `member_application_tokens` | Token ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö public form access |

---

## üìù ‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏° Member Application (26 ‡∏ü‡∏¥‡∏•‡∏î‡πå)

### **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß (9 fields)**
1. ‡∏ä‡∏∑‡πà‡∏≠ (first_name)
2. ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• (last_name)
3. ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£ (phone)
4. ‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î (birth_date)
5. ‡∏≠‡∏≤‡∏¢‡∏∏ (age) - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
6. ‡∏ß‡∏∏‡∏í‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤ (education_level)
7. ‡∏™‡∏±‡∏ç‡∏ä‡∏≤‡∏ï‡∏¥ (nationality)
8. ‡∏®‡∏≤‡∏™‡∏ô‡∏≤ (religion)
9. ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô (id_card_number)
10. ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏±‡∏Ñ‡∏£ (position_applied)

### **‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà (6 fields)**
11. ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà (address_house_number)
12. ‡∏´‡∏°‡∏π‡πà (address_moo)
13. ‡∏ã‡∏≠‡∏¢ (address_soi)
14. ‡∏ï‡∏≥‡∏ö‡∏• (address_tambon)
15. ‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ (address_amphoe)
16. ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î (address_province)

### **‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (2 fields)**
17. ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏á‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á (has_construction_experience)
18. ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏õ‡∏µ (construction_experience_years) - ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "‡πÄ‡∏Ñ‡∏¢"

### **‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û (6 fields)**
19. ‡∏Å‡∏•‡∏±‡∏ß‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á (has_acrophobia)
20. ‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß (has_chronic_disease)
21. ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÇ‡∏£‡∏Ñ (chronic_disease_details) - ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "‡πÄ‡∏õ‡πá‡∏ô"
22. ‡∏ï‡∏≤‡∏ö‡∏≠‡∏î‡∏™‡∏µ (has_color_blindness)
23. ‡∏•‡∏°‡∏ä‡∏±‡∏Å (has_epilepsy)
24. ‡∏≠‡∏∑‡πà‡∏ô‡πÜ (other_health_issues)

### **‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (2 fields)**
25. ‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô (document_id_card) - jpg/png/pdf
26. ‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡πÅ‡∏û‡∏ó‡∏¢‡πå (document_medical_certificate) - jpg/png/pdf

### **‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô (2 fields - 1 hidden)**
27. ‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ (applicant_signature)
28. ‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° (supervisor_signature) - ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô public form

---

## üöÄ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á (Installation)

### **Step 1: ‡∏£‡∏±‡∏ô Database Migration**

1. ‡πÄ‡∏õ‡∏¥‡∏î **Supabase Dashboard** ‚Üí **SQL Editor**
2. ‡∏£‡∏±‡∏ô `member_application_schema.sql` ‡∏Å‡πà‡∏≠‡∏ô:
   ```
   database/member_application_schema.sql
   ```
3. ‡∏£‡∏±‡∏ô `member_application_seed.sql` ‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á:
   ```
   database/member_application_seed.sql
   ```

### **Step 2: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à**

‡∏£‡∏±‡∏ô‡πÉ‡∏ô SQL Editor:
```sql
-- Check tables created
SELECT table_name 
FROM information_schema.tables 
WHERE table_schema = 'public' 
  AND table_name LIKE '%member_application%'
ORDER BY table_name;

-- Check form template created
SELECT code, name_th, name_en 
FROM form_templates 
WHERE code = 'MEMBER_APPLICATION';

-- Check fields created
SELECT COUNT(*) as total_fields 
FROM form_fields ff
JOIN form_templates ft ON ff.form_template_id = ft.id
WHERE ft.code = 'MEMBER_APPLICATION';
-- Should return: 26
```

‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô:
- ‚úÖ 8 ‡∏ï‡∏≤‡∏£‡∏≤‡∏á
- ‚úÖ 1 form template (MEMBER_APPLICATION)
- ‚úÖ 26 fields

---

## üéØ ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (Usage)

### **1. Admin: ‡∏™‡∏£‡πâ‡∏≤‡∏á Token ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Public Form**

```sql
-- Generate token for a project
INSERT INTO member_application_tokens (
    token,
    project_id,
    form_template_id,
    is_one_time_use,
    max_uses,
    expires_at
) VALUES (
    generate_secure_token(32), -- Random 32-char token
    'YOUR_PROJECT_ID',
    (SELECT id FROM form_templates WHERE code = 'MEMBER_APPLICATION'),
    true,
    1,
    now() + interval '30 days' -- Expires in 30 days
) RETURNING *;
```

### **2. Public User: ‡∏Å‡∏£‡∏≠‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏°**

URL: `https://yourapp.com/public/member-apply?token=abc123xyz`

- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö token ‡∏ß‡πà‡∏≤ valid ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
- ‡πÇ‡∏´‡∏•‡∏î form fields ‡∏ï‡∏≤‡∏° project config
- ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• + ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£
- Submit ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á `member_applications` table

### **3. Admin: ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£**

```sql
-- View all applications
SELECT 
    ma.submission_number,
    ma.submitted_at,
    ma.form_data->>'first_name' as first_name,
    ma.form_data->>'last_name' as last_name,
    ma.status,
    p.name_th as project_name
FROM member_applications ma
JOIN projects p ON ma.project_id = p.id
ORDER BY ma.submitted_at DESC;
```

### **4. Admin: Export PDF**

- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å report template
- Merge ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å `form_data` JSONB
- ‡πÅ‡∏™‡∏î‡∏á HTML ‡∏û‡∏£‡πâ‡∏≠‡∏° `@media print` CSS
- User ‡∏Å‡∏î "Print to PDF"

---

## üîê Security & RLS

- ‚úÖ **RLS Enabled** ‡∏ö‡∏ô‡∏ó‡∏∏‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á
- ‚úÖ **Public Access**: Token-based validation ‡πÉ‡∏ô application code
- ‚úÖ **Anon Role**: ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ INSERT ‡∏ú‡πà‡∏≤‡∏ô token ‡∏ó‡∏µ‡πà valid
- ‚úÖ **Authenticated Users**: ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏ï‡∏ô‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ

---

## üì¶ Assets (Logo & Images)

Logo ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡πÄ‡∏Å‡πá‡∏ö‡∏ó‡∏µ‡πà **Cloudflare R2**:
```
URL: https://pub-79e4b0dc661242159b0d79ab81ffd428.r2.dev/qshe-assets/logos/Logo-STECON.jpg
```

‡πÉ‡∏ä‡πâ‡πÉ‡∏ô `report_templates.logo_url`

---

## üé® Features ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ï‡πà‡∏≠

- [ ] Form Config UI (Admin)
- [ ] Report Template Builder UI
- [ ] Dynamic Public Form Component
- [ ] Token Management API & UI
- [ ] PDF Report Renderer
- [ ] Admin Dashboard

---

## üìö ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

- `member_application_schema.sql` - Database schema
- `member_application_seed.sql` - Seed data (form + 26 fields)
- `JobApply.txt` - Original form specification
- `JobApply.png` - Original form layout

---

## üêõ Troubleshooting

### ‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ table `users` ‡∏´‡∏£‡∏∑‡∏≠ `projects`

‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏£‡∏≤‡∏á `users` ‡πÅ‡∏•‡∏∞ `projects` ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ ‡πÉ‡∏´‡πâ‡∏£‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô:
```sql
-- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç foreign key ‡πÉ‡∏ô schema ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á users/projects ‡∏Å‡πà‡∏≠‡∏ô
```

### ‚ùå Token ‡πÑ‡∏°‡πà work

‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤:
1. `is_active = true`
2. `expires_at > now()`
3. `current_uses < max_uses`

```sql
SELECT * 
FROM member_application_tokens 
WHERE token = 'your_token_here'
  AND is_active = true
  AND expires_at > now();
```

---

## üë®‚Äçüíª Developer Notes

### **JSONB Form Data Structure**

```json
{
  "first_name": "‡∏™‡∏°‡∏ä‡∏≤‡∏¢",
  "last_name": "‡πÉ‡∏à‡∏î‡∏µ",
  "phone": "0812345678",
  "birth_date": "1990-05-15",
  "age": 33,
  "education_level": "bachelor",
  "nationality": "‡πÑ‡∏ó‡∏¢",
  "religion": "buddhist",
  "id_card_number": "1234567890123",
  "position_applied": "‡∏ä‡πà‡∏≤‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°",
  "address_house_number": "123",
  "address_moo": "5",
  "address_soi": "‡∏•‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ß 101",
  "address_tambon": "‡∏Ñ‡∏•‡∏≠‡∏á‡∏à‡∏±‡πà‡∏ô",
  "address_amphoe": "‡∏ö‡∏≤‡∏á‡∏Å‡∏∞‡∏õ‡∏¥",
  "address_province": "‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£",
  "has_construction_experience": "yes",
  "construction_experience_years": 5,
  "has_acrophobia": "no",
  "has_chronic_disease": "no",
  "has_color_blindness": "no",
  "has_epilepsy": "no",
  "other_health_issues": ""
}
```

### **Query JSONB Data**

```sql
-- Find applications by name
SELECT * FROM member_applications
WHERE form_data->>'first_name' = '‡∏™‡∏°‡∏ä‡∏≤‡∏¢';

-- Find applications with construction experience
SELECT * FROM member_applications
WHERE form_data->>'has_construction_experience' = 'yes';

-- Find applications by age range
SELECT * FROM member_applications
WHERE (form_data->>'age')::int BETWEEN 25 AND 35;
```

---

## ‚úÖ Summary

‚úÖ **8 Tables Created** - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö dynamic forms  
‚úÖ **26 Fields Defined** - ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô JobApply.txt  
‚úÖ **Token-based Public Access** - ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á login  
‚úÖ **RLS Policies** - ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢  
‚úÖ **JSONB Flexibility** - ‡πÄ‡∏û‡∏¥‡πà‡∏° field ‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢  
‚úÖ **Multi-tenant** - ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ config ‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ  
‚úÖ **Multi-report** - ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢ template  

üéâ **Ready to build the UI!**
